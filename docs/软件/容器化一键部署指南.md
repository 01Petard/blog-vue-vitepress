# ğŸš€ å®¹å™¨åŒ–ä¸€é”®éƒ¨ç½²æŒ‡å—

ä»¥ä¸‹æ–‡æ¡£å°†é€šè¿‡ Docker å¿«é€Ÿæ­å»º **MySQL**ã€**Redis**ã€**Java åç«¯** å’Œ **Nginx**ï¼ˆé™æ€èµ„æº + åå‘ä»£ç†ï¼‰çš„å®Œæ•´ç¯å¢ƒã€‚

## ğŸ³ é›¶ã€dockerå‘½ä»¤è¡¥å……

| æ“ä½œ         | å‘½ä»¤                                       |
| ------------ | ------------------------------------------ |
| æ£€æŸ¥æœåŠ¡çŠ¶æ€ | `docker-compose ps`                        |
| å¼ºåˆ¶é‡å¯æœåŠ¡ | `docker-compose restart ${container_name}` |
| å¯åŠ¨æœåŠ¡     | `docker-compose up -d`                     |
| é‡å»ºæœåŠ¡     | `docker-compose up --build -d`             |
| åœæ­¢æœåŠ¡     | `docker-compose stop`                      |
| æ¸…ç†æœåŠ¡     | `docker-compose down -v`                   |
| æŸ¥çœ‹æ—¥å¿—     | `docker-compose logs -f ${container_name}` |
| åˆ é™¤æ‰€æœ‰å®¹å™¨ | `docker rm -f $(docker ps -aq)`            |
| åˆ é™¤æ‰€æœ‰é•œåƒ | `docker rmi -f $(docker images -q)`        |

## ğŸ“‚ ä¸€ã€ç›®å½•ç»“æ„è§„èŒƒåŠè¯´æ˜

æ‰€æœ‰æ–‡ä»¶æ”¾åœ¨åŒä¸€é¡¹ç›®æ ¹ç›®å½•

```
your-project/
â”œâ”€â”€ dist/                  # å‰ç«¯æ„å»ºäº§ç‰©
â”‚   â””â”€â”€ index.html
â”œâ”€â”€ init_scripts/
â”‚   â””â”€â”€ create_user.sql    # æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
â”œâ”€â”€ logs/                  # åç«¯çš„é¡¹ç›®æ—¥å¿—
â”‚   â””â”€â”€ ...
â”œâ”€â”€ nginx/
â”‚   â””â”€â”€ conf.d/
â”‚       â””â”€â”€ default.conf   # Nginx é…ç½®ï¼ˆé™æ€ + /api ä»£ç†ï¼‰
â”œâ”€â”€ .env                   # å­˜å‚¨æ•°æ®åº“å’Œç¼“å­˜çš„å¯†ç 
â”œâ”€â”€ app.jar                # åç«¯æ‰“åŒ…å¥½çš„ Java åº”ç”¨
â””â”€â”€ docker-compose.yml     # Docker Compose ç¼–æ’é…ç½®
```

ç›®å½•ç»“æ„è¯´æ˜

| æ–‡ä»¶/ç›®å½•                      | ä½œç”¨                                                     |
| ------------------------------ | -------------------------------------------------------- |
| `dist/`                        | å‰ç«¯é™æ€èµ„æºç›®å½•ï¼Œæ˜ å°„åˆ° Nginx `/usr/share/nginx/html`   |
| `init_scripts/create_user.sql` | æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬ï¼šåˆå§‹åŒ–è¿œç¨‹è®¿é—®ç”¨æˆ·åå’Œå¯†ç ã€åˆ›å»ºç¤ºä¾‹è¡¨ |
| `logs/`                        | åç«¯æ˜ å°„å‡ºæ¥çš„æ—¥å¿—                                       |
| `app.jar`                      | åç«¯æ‰“åŒ…ï¼ŒæŒ‚è½½åˆ°å®¹å™¨ `/app.jar`                          |
| `nginx/conf.d/default.conf`    | Nginx é…ç½®ï¼Œè´Ÿè´£é™æ€æ‰˜ç®¡å’ŒAPIä»£ç†                        |
| `docker-compose.yml`           | å®šä¹‰å„æœåŠ¡ï¼šMySQLã€Redisã€Javaã€Nginx                    |

## ğŸ“ äºŒã€æ ¸å¿ƒé…ç½®

### 1. `docker-compose.yml`

**å¿…é¡»è¦ä¿®æ”¹**çš„æ˜¯`.env`æ–‡ä»¶çš„mysqlå’Œredisçš„å¯†ç ï¼Œå‰ç«¯é¡¹ç›®çš„ç«¯å£ä¸æ˜¯9000åˆ™ä¹Ÿéœ€è¦ä¿®æ”¹

è§é¡¹ç›®æ–‡ä»¶ï¼š[docker-compose.yml](https://github.com/01Petard/app-docker-compose/blob/main/project_folder/docker-compose.yml)

### 2. `nginx/conf.d/default.conf`

**ä»…ä½œä¸¾ä¾‹è¯´æ˜**ï¼Œä»¥å®é™…å¼€å‘çš„é…ç½®ä¸ºå‡†ï¼Œå¦‚æœä¿®æ”¹äº†ç›‘å¬çš„ç«¯å£ï¼Œåˆ™``docker-compose.yml`ä¹Ÿéœ€è¦ä¿®æ”¹

è§é¡¹ç›®æ–‡ä»¶ï¼š[default.conf](https://github.com/01Petard/app-docker-compose/blob/main/project_folder/nginx/conf.d/default.conf)