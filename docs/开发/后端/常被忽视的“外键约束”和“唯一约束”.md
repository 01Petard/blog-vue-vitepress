åœ¨æ•°æ®åº“ä¸­ï¼Œ**çº¦æŸï¼ˆConstraintï¼‰**æ˜¯ç”¨æ¥**é™åˆ¶æ•°æ®åˆæ³•æ€§**çš„æ‰‹æ®µï¼Œ`UNIQUE` åªæ˜¯å…¶ä¸­ä¸€ç§ã€‚MySQL åŠå…¶ä»–å…³ç³»åž‹æ•°æ®åº“è¿˜æ”¯æŒä»¥ä¸‹å‡ ç§å¸¸è§çº¦æŸç±»åž‹ï¼š

## ðŸ”’ å¸¸è§çš„çº¦æŸç±»åž‹æ±‡æ€»

| çº¦æŸç±»åž‹               | å…³é”®å­—        | ä¿è¯                         | ç¤ºä¾‹                                  | ç”¨é€”æè¿°                             |
| ---------------------- | ------------- | ---------------------------- | ------------------------------------- | ------------------------------------ |
| âœ… ä¸»é”®çº¦æŸ             | `PRIMARY KEY` | å”¯ä¸€ + éžç©ºï¼Œæ¯è¡¨ä»…ä¸€ä¸ª      | `id INT PRIMARY KEY`                  | å”¯ä¸€æ ‡è¯†æ¯ä¸€è¡Œï¼Œä¸èƒ½ä¸º `NULL`        |
| âœ… å”¯ä¸€çº¦æŸ             | `UNIQUE`      | å€¼å”¯ä¸€ï¼Œå…è®¸å¤šä¸ª`NULL`       | `email VARCHAR(100) UNIQUE`           | é™åˆ¶å­—æ®µå€¼ä¸èƒ½é‡å¤ï¼Œå¯ä¸º `NULL`      |
| âœ… éžç©ºçº¦æŸ             | `NOT NULL`    | éžç©º                         | `name VARCHAR(50) NOT NULL`           | é™åˆ¶å­—æ®µå€¼ä¸èƒ½ä¸º `NULL`              |
| âœ… é»˜è®¤å€¼çº¦æŸ           | `DEFAULT`     | é»˜è®¤å€¼                       | `status VARCHAR(10) DEFAULT 'active'` | è®¾ç½®å­—æ®µçš„é»˜è®¤å€¼                     |
| âœ… å¤–é”®çº¦æŸ             | `FOREIGN KEY` | å…³è”çˆ¶è¡¨å­—æ®µï¼Œä¿è¯æ•°æ®åˆæ³•æ€§ | `FOREIGN KEY (x) REFERENCES y(z)`     | å»ºç«‹ä¸¤ä¸ªè¡¨ä¹‹é—´çš„å…³è”å…³ç³»             |
| âœ… æ£€æŸ¥çº¦æŸï¼ˆMySQL 8+ï¼‰ | `CHECK`       | æ¡ä»¶çº¦æŸ                     | `age INT CHECK (age > 0)`             | é™åˆ¶å­—æ®µå¿…é¡»æ»¡è¶³æŸç§æ¡ä»¶ï¼ˆå¦‚å€¼èŒƒå›´ï¼‰ |

## ðŸ§  ç¤ºä¾‹ç»¼åˆå»ºè¡¨è¯­å¥ï¼š

```sql
CREATE TABLE students (
  id INT PRIMARY KEY AUTO_INCREMENT,
  name VARCHAR(50) NOT NULL,
  email VARCHAR(100) UNIQUE,
  age INT CHECK (age >= 0 AND age <= 120),
  status VARCHAR(10) DEFAULT 'active',
  class_id INT,
  FOREIGN KEY (class_id) REFERENCES classes(id)
);
```

## ðŸ”‘ å¤–é”®ä¸Žå”¯ä¸€ç´¢å¼•

### å¤–é”®ï¼ˆ`FOREIGN KEY`ï¼‰

**ä½œç”¨**ï¼š ç¡®ä¿å­è¡¨å­—æ®µåœ¨çˆ¶è¡¨ä¸­å­˜åœ¨å¯¹åº”å€¼ï¼Œç»´æŠ¤è¡¨é—´å‚ç…§å®Œæ•´æ€§ã€‚

##### **å°‘ç”¨å¤–é”®çš„äº”å¤§åŽŸå› **  
1. **æ€§èƒ½ä¸Žè¿ç»´æˆæœ¬**  
   - **å†™å…¥å¼€é”€**ï¼šå¤–é”®æ£€æŸ¥å¯¼è‡´é”ç«žäº‰å’Œæ€§èƒ½ä¸‹é™ï¼ˆé«˜å¹¶å‘åœºæ™¯æ•æ„Ÿï¼‰ã€‚  
   - **è¡¨ç»“æž„å˜æ›´å›°éš¾**ï¼šéœ€å…ˆåˆ é™¤å¤–é”®æ‰èƒ½ä¿®æ”¹çˆ¶è¡¨ç»“æž„ï¼Œå½±å“è¿­ä»£æ•ˆçŽ‡ã€‚  

2. **åº”ç”¨å±‚ä¾èµ–**  
   - ORMæ¡†æž¶ï¼ˆå¦‚Hibernateï¼‰é€šè¿‡ä»£ç ç®¡ç†å…³è”ï¼Œæ›¿ä»£æ•°æ®åº“çº§çº¦æŸã€‚  
   - å¾®æœåŠ¡æž¶æž„ä¸‹ï¼Œè·¨æœåŠ¡æ•°æ®åº“æ— æ³•ä½¿ç”¨å¤–é”®ï¼Œä¾èµ–RPC/æ¶ˆæ¯é˜Ÿåˆ—ä¿è¯ä¸€è‡´æ€§ã€‚  

3. **æµ‹è¯•ä¸Žè¿ç§»çµæ´»æ€§**  
   - è‡ªåŠ¨åŒ–æµ‹è¯•éœ€æŒ‰ä¾èµ–é¡ºåºæ’å…¥æ•°æ®ï¼Œå¤æ‚åº¦å¢žåŠ ã€‚  
   - æ•°æ®è¿ç§»ï¼ˆETLï¼‰æ—¶å¤–é”®æ£€æŸ¥é™ä½Žå¯¼å…¥é€Ÿåº¦ã€‚  

4. **è½¯åˆ é™¤ä¸ŽåŽ†å²è¿½è¸ªå†²çª**  
   - è½¯åˆ é™¤ï¼ˆ`deleted_at`ï¼‰éœ€ä¿ç•™å­è¡¨æ•°æ®ï¼Œä¸Žå¤–é”®çº§è”åˆ é™¤ï¼ˆ`ON DELETE CASCADE`ï¼‰çŸ›ç›¾ã€‚  

5. **å›¢é˜Ÿç»éªŒä¸Žæ–‡åŒ–**  
   - æ•æ·å¼€å‘ä¼˜å…ˆå¿«é€Ÿè¿­ä»£ï¼Œæ•°æ®åº“çº¦æŸå¸¸è¢«ä»£ç æ ¡éªŒæ›¿ä»£ã€‚  
   - éƒ¨åˆ†å¼€å‘è€…å¯¹æ•°æ®åº“è®¾è®¡ä¸ç†Ÿæ‚‰ï¼Œä¾èµ–åº”ç”¨å±‚é€»è¾‘ã€‚  

##### é‚£ä¹ˆï¼Œä»€ä¹ˆæ—¶å€™è¿˜è¦ç”¨å¤–é”®ï¼Ÿ

##### **é€‚ç”¨åœºæ™¯**  

- **æ ¸å¿ƒä¸šåŠ¡**ï¼šå¦‚æ”¯ä»˜ã€åº“å­˜ç³»ç»Ÿï¼Œéœ€ä¸¥æ ¼ä¸€è‡´æ€§ã€‚  
- **å¤šè¡¨è”åˆæŠ¥è¡¨**ï¼šé¿å…â€œå­¤å„¿æ•°æ®â€ã€‚  
- **å¤§åž‹å•ä½“åº”ç”¨**ï¼šé›†ä¸­å¼æ•°æ®åº“ç®¡ç†ã€‚  

##### æ€»ç»“

- **ä¼˜ç‚¹**ï¼šæœ€ç®€å•ã€æœ€é€æ˜Žçš„â€œæ•°æ®å±‚â€å®Œæ•´æ€§ä¿è¯ã€‚
- **ç¼ºç‚¹**ï¼šå†™æ€§èƒ½/è¿ç»´è¿­ä»£æˆæœ¬é«˜ï¼ŒORM å’Œå¾®æœåŠ¡ä¸‹éš¾ä»¥è·¨åº“ä½¿ç”¨ã€‚
- **å®žè·µ**ï¼šå°é¡¹ç›®ã€CRUD é¢‘ç¹ä¸”ä¸å¯å®¹å¿â€œå­¤å„¿æ•°æ®â€çš„æ ¸å¿ƒä¸šåŠ¡è¡¨ï¼Œä¾ç„¶æŽ¨èåŠ å¤–é”®ï¼›å…¶ä½™åœºæ™¯å¯æƒè¡¡å†…éƒ¨ä»£ç æ£€æŸ¥æˆ–ä½¿ç”¨åˆ†å¸ƒå¼äº‹åŠ¡/å¹‚ç­‰ä¿è¯ã€‚

### å”¯ä¸€ç´¢å¼•ï¼ˆ`UNIQUE`ï¼‰

**ä½œç”¨**ï¼š ç¡®ä¿å­—æ®µå€¼å”¯ä¸€ï¼ˆå…è®¸`NULL`ï¼Œä¸”å¤šä¸ª`NULL`ä¸å†²çªï¼‰ã€‚

##### **å”¯ä¸€çº¦æŸçš„ä¸¤ç§å®žçŽ°æ–¹å¼**  
1. **å­—æ®µçº§å®šä¹‰**  
   
   ```sql
   CREATE TABLE students (  
     email VARCHAR(100) UNIQUE  
   );  
   ```
   - ç®€æ´ï¼Œé€‚åˆå•å­—æ®µå”¯ä¸€ã€‚  
   - ç³»ç»Ÿè‡ªåŠ¨å‘½åç´¢å¼•ã€‚  
   
2. **è¡¨çº§å®šä¹‰**  
   ```sql
   CREATE TABLE users (  
     UNIQUE KEY uni_phone (phone)  
   );  
   ```
   - æ”¯æŒå¤šå­—æ®µè”åˆå”¯ä¸€ï¼ˆå¦‚`UNIQUE(user_id, role_id)`ï¼‰ã€‚  
   - å¯è‡ªå®šä¹‰ç´¢å¼•åç§°ï¼Œä¾¿äºŽç»´æŠ¤ã€‚  

---

##### **è”åˆå”¯ä¸€ vs å•å­—æ®µå”¯ä¸€**  
| ç±»åž‹           | è§„åˆ™                     | ç¤ºä¾‹åœºæ™¯                    |
| -------------- | ------------------------ | --------------------------- |
| è”åˆå”¯ä¸€çº¦æŸ   | ç»„åˆå€¼å”¯ä¸€ï¼Œå•å­—æ®µå¯é‡å¤ | `(country_code, phone)`å”¯ä¸€ |
| å•å­—æ®µå”¯ä¸€çº¦æŸ | æ¯ä¸ªå­—æ®µå•ç‹¬å”¯ä¸€         | `username`å”¯ä¸€              |

---

##### **ç´¢å¼•å¯¹æ¯”**  
| ç±»åž‹       | é€‚ç”¨åœºæ™¯               | ç‰¹ç‚¹                            |
| ---------- | ---------------------- | ------------------------------- |
| è”åˆç´¢å¼•   | ç»„åˆæŸ¥è¯¢ï¼ˆå·¦å‰ç¼€åŽŸåˆ™ï¼‰ | æŸ¥è¯¢`(a, b)`å¿«ï¼Œå•ç‹¬æŸ¥`b`æ•ˆçŽ‡ä½Ž |
| å•å­—æ®µç´¢å¼• | ç‹¬ç«‹å­—æ®µæŸ¥è¯¢           | å•å­—æ®µæŸ¥è¯¢å¿«ï¼Œç»„åˆæŸ¥è¯¢ä¼˜åŒ–æœ‰é™  |

### å®žæˆ˜å»ºè®®

1. **å¤–é”®ä½¿ç”¨**  
   - æ ¸å¿ƒä¸šåŠ¡è¡¨æŽ¨èä½¿ç”¨ï¼Œç‰ºç‰²æ€§èƒ½æ¢å–æ•°æ®å®‰å…¨ã€‚  
   - å¾®æœåŠ¡æˆ–é«˜å¹¶å‘åœºæ™¯ä¼˜å…ˆä¾èµ–ä»£ç é€»è¾‘æ ¡éªŒã€‚  

2. **å”¯ä¸€çº¦æŸ**  
   - å•å­—æ®µå”¯ä¸€ç”¨å­—æ®µçº§å®šä¹‰ï¼Œè”åˆå”¯ä¸€ç”¨è¡¨çº§å®šä¹‰ã€‚  
   - ç”Ÿäº§çŽ¯å¢ƒå»ºè®®è¡¨çº§å†™æ³•ï¼Œä¾¿äºŽç»´æŠ¤å’Œæ‰©å±•ã€‚  

3. **ç´¢å¼•è®¾è®¡**  
   - é«˜é¢‘è”åˆæŸ¥è¯¢å­—æ®µä½¿ç”¨è”åˆç´¢å¼•ï¼ˆå¦‚`(user_id, order_id)`ï¼‰ã€‚  
   - ç‹¬ç«‹æŸ¥è¯¢å­—æ®µå•ç‹¬å»ºç´¢å¼•ã€‚  

### æ€»ç»“  

- **å¤–é”®**ï¼šå¼ºä¸€è‡´æ€§åœºæ™¯çš„â€œåŒåˆƒå‰‘â€ï¼Œæƒè¡¡æ€§èƒ½ä¸Žå®‰å…¨ã€‚  
- **å”¯ä¸€ç´¢å¼•**ï¼šçµæ´»ä¿éšœæ•°æ®å”¯ä¸€æ€§ï¼Œæ³¨æ„`NULL`å¤„ç†ä¸Žè”åˆçº¦æŸã€‚  
- **è®¾è®¡åŽŸåˆ™**ï¼šæ ¹æ®ä¸šåŠ¡éœ€æ±‚é€‰æ‹©çº¦æŸç±»åž‹ï¼Œä¼˜å…ˆä»£ç æ ¡éªŒæˆ–æ•°æ®åº“çº¦æŸï¼Œé¿å…è¿‡åº¦è®¾è®¡ã€‚